{"version":3,"sources":["components/img/bg.png","state/reducers/mainReducers.js","state/reducers/index.js","state/actions/main.js","store.js","components/Navbar.js","assets/constants.js","components/Dashboard.js","components/Signin.js","components/gameHelpers.js","components/blockris/styles/StyledTetris.js","components/tetrominos.js","components/hooks/usePlayer.js","components/hooks/useStage.js","components/blockris/styles/StyledStage.js","components/blockris/styles/StyledCell.js","components/blockris/Cell.js","components/blockris/Stage.js","components/blockris/styles/StyledDisplay.js","components/blockris/Display.js","components/blockris/StartButton.js","components/blockris/Blockris.js","components/hooks/useGameStatus.js","components/hooks/useInterval.js","components/Profile.js","components/Leaderboard.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","appConfig","AppConfig","userSession","UserSession","intitalState","combineReducers","mainReducers","state","arguments","length","undefined","type","composeEnhance","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducers","applyMiddleware","thunk","logger","NavBar","username","this","props","user","react_default","a","createElement","className","Link","to","src","avatarUrl","class","width","height","alt","onClick","signOut","bind","Component","Dashboard","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","tasks","value","loadUserData","profile","person","Person","Navbar","handleSignOut","defaultProps","Signin","handleSignIn","id","createStage","Array","from","fill","checkCollision","player","stage","_ref","moveX","x","moveY","y","tetromino","pos","StyledTetrisWrapper","styled","div","_templateObject","bgImage","StyledTetris","_templateObject2","TETROMINOS","0","shape","color","I","J","L","O","S","T","Z","randomTetromino","randTetromino","Math","floor","random","usePlayer","_useState","useState","collided","_useState2","slicedToArray","setPlayer","rotate","matrix","dir","mtrx","map","_","index","column","row","reverse","resetPlayer","useCallback","STAGE_WIDTH","prev","_objectSpread","clonedPlayer","JSON","parse","stringify","offset","useStage","setStage","_useState3","_useState4","rowsCleared","setRowsCleared","useEffect","updateStage","prevStage","newStage","cell","forEach","concat","reduce","ack","findIndex","unshift","push","sweepRows","StyledStage","StyledStage_templateObject","StyledCell","StyledCell_templateObject","React","memo","console","log","Stage","blockris_Cell","key","StyledDisplay","StyledDisplay_templateObject","gameOver","Display","text","StyledStartButton","button","StartButton_templateObject","StartButton","callback","Blockris","dropTime","setDropTime","setGameOver","_usePlayer","_usePlayer2","updatePlayerPos","playerRotate","_useStage","_useStage2","_useGameStatus","score","setScore","rows","setRows","_useState5","_useState6","level","setLevel","linePoints","calcScore","useGameStatus","_useGameStatus2","movePlayer","drop","putFile","encrypt","delay","savedCallback","useRef","current","setInterval","clearInterval","useInterval","move","_ref2","keyCode","Fragment","role","tabIndex","onKeyDown","e","onKeyUp","blockris_Stage","blockris_Display","blockris_StartButton","avatarFallbackImage","Profile","name","newStatus","statuses","statusIndex","isLoading","fetchData","event","setState","target","saveNewStatus","statusText","_this2","status","trim","created_at","Date","now","then","match","params","_this3","isLocal","getFile","decrypt","file","finally","lookupProfile","catch","error","options","_this4","_this$props","isSignInPending","onChange","handleNewStatusChange","placeholder","handleNewStatusSubmit","Leaderboards","scores","App","preventDefault","redirectToSignIn","signUserOut","location","origin","isUserSignedIn","Switch","Route","exact","path","render","routeProps","components_Dashboard","assign","Profile_Profile","blockris_Blockris","Leaderboard","Signin_Signin","handlePendingSignIn","userData","ReactDOM","es","BrowserRouter","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.dd97e011.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg.2810fe6b.png\";","import { LOGINING_IN } from \"../actions\";\nimport { UserSession, AppConfig } from \"blockstack\";\n\nconst appConfig = new AppConfig([\"store_write\", \"publish_data\"]);\nconst userSession = new UserSession({ appConfig: appConfig });\n\nconst intitalState = {\n  appConfig,\n  userSession\n};\n\nexport const mainReducers = (state = intitalState, action) => {\n  switch (action.type) {\n    case LOGINING_IN:\n      return { appConfig, userSession };\n\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { mainReducers } from \"./mainReducers\";\n\nexport default combineReducers({ mainReducers });\n","export const LOGINING_IN = \"LOGINING_IN\";\n\nexport const loginIn = () => async dispatch => {\n  dispatch({\n    type: LOGINING_IN\n  });\n};\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducers from \"./state/reducers/index.js\";\nimport logger from \"redux-logger\";\n\n// const middleware = [thunk, logger];\nconst composeEnhance = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  rootReducers,\n  composeEnhance(applyMiddleware(thunk, logger))\n);\n\nexport default store;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"../styles/NavBar.css\";\n\nclass NavBar extends Component {\n  render() {\n    const username = this.props.username;\n    const user = this.props.user;\n    return (\n      <nav className=\"navbar navbar-expand-md navbar-dark bg-blue fixed-top\">\n        <Link className=\"navbar-brand\" to=\"/\">\n          Blockris\n        </Link>\n        <ul className=\"navbar-nav mr-auto\">\n          <li className=\"nav-item\">\n            <Link className=\"nav-link\" to=\"/profile\">\n              {username}\n            </Link>\n          </li>\n        </ul>\n        <img\n          src={user.avatarUrl() ? user.avatarUrl() : \"./avatar-placeholder.png\"}\n          class=\"avatar\"\n          width=\"25\"\n          height=\"25\"\n          alt=\"\"\n        />\n        <button\n          className=\"btn btn-primary\"\n          onClick={this.props.signOut.bind(this)}\n        >\n          Sign out\n        </button>\n      </nav>\n    );\n  }\n}\n\nexport default NavBar;\n","import { AppConfig } from \"blockstack\";\n\nexport const appConfig = new AppConfig([\"store_write\", \"publish_data\"]);\n\nexport const TASKS_FILENAME = \"tasks.json\";\n\nexport const EXPLORER_URL = \"https://explorer.blockstack.org\";\n","import React, { Component } from \"react\";\nimport Navbar from \"./Navbar\";\nimport { Link } from \"react-router-dom\";\nimport { UserSession, Person } from \"blockstack\";\nimport { appConfig } from \"../assets/constants\";\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tasks: [],\n      value: \"\"\n    };\n  }\n  render() {\n    const username = this.props.userSession.loadUserData().username;\n    const profile = this.props.userSession.loadUserData();\n    const person = new Person(profile);\n\n    return (\n      <div className=\"Dashboard\">\n        <Navbar\n          username={username}\n          user={person}\n          signOut={this.props.handleSignOut}\n        />\n        <div className=\"row justify-content-center\">\n          <h3 className=\"user-info\">{username}'s Portal</h3>\n        </div>\n        <br />\n        <div className=\"column justify-content-center\">\n          <Link to=\"/profile\">\n            <h1>Profile</h1>\n          </Link>\n          <Link to=\"/blockris\">\n            <h1>Play Now</h1>\n          </Link>\n          <Link to=\"/leaderboard\">\n            <h1>Leaderboard</h1>\n          </Link>\n          <h1>Tournaments (Coming Soon)</h1>\n          <h1>Battle (Coming Soon)</h1>\n        </div>\n      </div>\n    );\n  }\n}\n\n// Made this a default prop (instead of using this.userSession) so a dummy userSession\n// can be passed in for testing purposes\nDashboard.defaultProps = {\n  userSession: new UserSession(appConfig)\n};\n\nexport default Dashboard;\n","import React, { Component } from \"react\";\n\nexport default class Signin extends Component {\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">Welcome to Blockris!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={handleSignIn.bind(this)}\n          >\n            Sign In with Blockstack\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","export const STAGE_WIDTH = 12;\nexport const STAGE_HEIGHT = 20;\n\nexport const createStage = () =>\n  Array.from(Array(STAGE_HEIGHT), () => Array(STAGE_WIDTH).fill([0, \"clear\"]));\n\nexport const checkCollision = (player, stage, { x: moveX, y: moveY }) => {\n  // Using for loops to be able to return (and break). Not possible with forEach\n  for (let y = 0; y < player.tetromino.length; y += 1) {\n    for (let x = 0; x < player.tetromino[y].length; x += 1) {\n      // 1. Check that we're on an actual Tetromino cell\n      if (player.tetromino[y][x] !== 0) {\n        if (\n          // 2. Check that our move is inside the game areas height (y)\n          // That we're not go through bottom of the play area\n          !stage[y + player.pos.y + moveY] ||\n          // 3. Check that our move is inside the game areas width (x)\n          !stage[y + player.pos.y + moveY][x + player.pos.x + moveX] ||\n          // 4. Check that the cell wer'e moving to isn't set to clear\n          stage[y + player.pos.y + moveY][x + player.pos.x + moveX][1] !==\n            \"clear\"\n        ) {\n          return true;\n        }\n      }\n    }\n  }\n  // 5. If everything above is false\n  return false;\n};\n","import styled from \"styled-components\";\n// BG Image\nimport bgImage from \"../../img/bg.png\";\n\nexport const StyledTetrisWrapper = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: url(${bgImage}) #000;\n  background-size: cover;\n  overflow: hidden;\n`;\n\nexport const StyledTetris = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 40px;\n  margin: 260px 266px;\n  max-width: 900px;\n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n`;\n","export const TETROMINOS = {\n  0: { shape: [[0]], color: \"0, 0, 0\" },\n  I: {\n    shape: [[0, \"I\", 0, 0], [0, \"I\", 0, 0], [0, \"I\", 0, 0], [0, \"I\", 0, 0]],\n    color: \"80, 227, 230\"\n  },\n  J: { shape: [[0, \"J\", 0], [0, \"J\", 0], [\"J\", \"J\", 0]], color: \"36, 95, 223\" },\n  L: {\n    shape: [[0, \"L\", 0], [0, \"L\", 0], [0, \"L\", \"L\"]],\n    color: \"223, 173, 36\"\n  },\n  O: { shape: [[\"O\", \"O\"], [\"O\", \"O\"]], color: \"223, 217, 36\" },\n  S: { shape: [[0, \"S\", \"S\"], [\"S\", \"S\", 0], [0, 0, 0]], color: \"48, 211, 56\" },\n  T: {\n    shape: [[0, 0, 0], [\"T\", \"T\", \"T\"], [0, \"T\", 0]],\n    color: \"132, 61, 198\"\n  },\n  Z: { shape: [[\"Z\", \"Z\", 0], [0, \"Z\", \"Z\"], [0, 0, 0]], color: \"227, 78, 78\" }\n};\n\nexport const randomTetromino = () => {\n  const tetrominos = \"IJLOSTZ\";\n  const randTetromino =\n    tetrominos[Math.floor(Math.random() * tetrominos.length)];\n  return TETROMINOS[randTetromino];\n};\n","import { useState, useCallback } from \"react\";\n\nimport { TETROMINOS, randomTetromino } from \"../tetrominos\";\nimport { STAGE_WIDTH, checkCollision } from \"../gameHelpers\";\n\nexport const usePlayer = () => {\n  const [player, setPlayer] = useState({\n    pos: { x: 0, y: 0 },\n    tetromino: TETROMINOS[0].shape,\n    collided: false\n  });\n\n  function rotate(matrix, dir) {\n    // Make the rows to become cols (transpose)\n    const mtrx = matrix.map((_, index) => matrix.map(column => column[index]));\n    // Reverse each row to get a rotaded matrix\n    if (dir > 0) return mtrx.map(row => row.reverse());\n    return mtrx.reverse();\n  }\n\n  function playerRotate(stage, dir) {\n    const clonedPlayer = JSON.parse(JSON.stringify(player));\n    clonedPlayer.tetromino = rotate(clonedPlayer.tetromino, dir);\n\n    const pos = clonedPlayer.pos.x;\n    let offset = 1;\n    while (checkCollision(clonedPlayer, stage, { x: 0, y: 0 })) {\n      clonedPlayer.pos.x += offset;\n      offset = -(offset + (offset > 0 ? 1 : -1));\n      if (offset > clonedPlayer.tetromino[0].length) {\n        rotate(clonedPlayer.tetromino, -dir);\n        clonedPlayer.pos.x = pos;\n        return;\n      }\n    }\n    setPlayer(clonedPlayer);\n  }\n\n  const updatePlayerPos = ({ x, y, collided }) => {\n    setPlayer(prev => ({\n      ...prev,\n      pos: { x: (prev.pos.x += x), y: (prev.pos.y += y) },\n      collided\n    }));\n  };\n\n  const resetPlayer = useCallback(() => {\n    setPlayer({\n      pos: { x: STAGE_WIDTH / 2 - 2, y: 0 },\n      tetromino: randomTetromino().shape,\n      collided: false\n    });\n  }, []);\n\n  return [player, updatePlayerPos, resetPlayer, playerRotate];\n};\n","import { useState, useEffect } from \"react\";\nimport { createStage } from \"../gameHelpers\";\n\nexport const useStage = (player, resetPlayer) => {\n  const [stage, setStage] = useState(createStage());\n  const [rowsCleared, setRowsCleared] = useState(0);\n\n  useEffect(() => {\n    setRowsCleared(0);\n    const sweepRows = newStage =>\n      newStage.reduce((ack, row) => {\n        if (row.findIndex(cell => cell[0] === 0) === -1) {\n          setRowsCleared(prev => prev + 1);\n          ack.unshift(new Array(newStage[0].length).fill([0, \"clear\"]));\n          return ack;\n        }\n        ack.push(row);\n        return ack;\n      }, []);\n\n    const updateStage = prevStage => {\n      // First flush the stage\n      const newStage = prevStage.map(row =>\n        row.map(cell => (cell[1] === \"clear\" ? [0, \"clear\"] : cell))\n      );\n\n      // Then draw the tetromino\n      player.tetromino.forEach((row, y) => {\n        row.forEach((value, x) => {\n          if (value !== 0) {\n            newStage[y + player.pos.y][x + player.pos.x] = [\n              value,\n              `${player.collided ? \"merged\" : \"clear\"}`\n            ];\n          }\n        });\n      });\n      // Then check if we got some score if collided\n      if (player.collided) {\n        resetPlayer();\n        return sweepRows(newStage);\n      }\n      return newStage;\n    };\n\n    // Here are the updates\n    setStage(prev => updateStage(prev));\n  }, [\n    player.collided,\n    player.pos.x,\n    player.pos.y,\n    player.tetromino,\n    resetPlayer\n  ]);\n\n  return [stage, setStage, rowsCleared];\n};\n","import styled from \"styled-components\";\n\nexport const StyledStage = styled.div`\n  display: grid;\n  grid-template-rows: repeat(\n    ${props => props.height},\n    calc(25vw / ${props => props.width})\n  );\n  grid-template-columns: repeat(${props => props.width}, 1fr);\n  grid-gap: 1px;\n  border: 2px solid #333;\n  width: 100%;\n  max-width: 25vw;\n  background: #111;\n`;\n","import styled from \"styled-components\";\n\nexport const StyledCell = styled.div`\n  width: auto;\n  /* border-radius: 5px; */\n  background: rgba(${props => props.color}, 0.8);\n  border: ${props => (props.type === 0 ? \"0px solid\" : \"4px solid\")};\n  border-bottom-color: rgba(${props => props.color}, 0.1);\n  border-right-color: rgba(${props => props.color}, 1);\n  border-top-color: rgba(${props => props.color}, 1);\n  border-left-color: rgba(${props => props.color}, 0.3);\n`;\n","import React from \"react\";\nimport { StyledCell } from \"./styles/StyledCell\";\nimport { TETROMINOS } from \"../tetrominos\";\n\n// React.memo makes sure we only re-render the changed cells\nconst Cell = ({ type }) => (\n  <StyledCell type={type} color={TETROMINOS[type].color}>\n    {console.log(\"rerender cell\")}\n  </StyledCell>\n);\n\nexport default React.memo(Cell);\n","import React from \"react\";\nimport { StyledStage } from \"./styles/StyledStage\";\n\nimport Cell from \"./Cell\";\n\nconst Stage = ({ stage }) => (\n  <StyledStage width={stage[0].length} height={stage.length}>\n    {stage.map(row => row.map((cell, x) => <Cell key={x} type={cell[0]} />))}\n  </StyledStage>\n);\n\nexport default Stage;\n","import styled from \"styled-components\";\n\nexport const StyledDisplay = styled.div`\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 40px 0 20px 0;\n  padding: 20px;\n  border: 4px solid #333;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  color: ${props => (props.gameOver ? \"red\" : \"#999\")};\n  background: #000;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 0.8rem;\n`;\n","import React from \"react\";\nimport { StyledDisplay } from \"./styles/StyledDisplay\";\n\nconst Display = ({ gameOver, text }) => (\n  <StyledDisplay gameOver={gameOver}>{text}</StyledDisplay>\n);\n\nexport default Display;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst StyledStartButton = styled.button`\n  box-sizing: border-box;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n`;\n\nconst StartButton = ({ callback }) => (\n  <StyledStartButton onClick={callback}>Start Game</StyledStartButton>\n);\n\nexport default StartButton;\n","import React, { useState } from \"react\";\nimport { UserSession, Person } from \"blockstack\";\nimport Navbar from \"../Navbar\";\n\nimport { createStage, checkCollision } from \"../gameHelpers\";\nimport { StyledTetrisWrapper, StyledTetris } from \"./styles/StyledTetris\";\n\n// Custom Hooks\nimport { useInterval } from \"../hooks/useInterval\";\nimport { usePlayer } from \"../hooks/usePlayer\";\nimport { useStage } from \"../hooks/useStage\";\nimport { useGameStatus } from \"../hooks/useGameStatus\";\n\n// Components\nimport Stage from \"./Stage\";\nimport Display from \"./Display\";\nimport StartButton from \"./StartButton\";\n\nconst Blockris = props => {\n  const [dropTime, setDropTime] = useState(null);\n  const [gameOver, setGameOver] = useState(false);\n\n  const [player, updatePlayerPos, resetPlayer, playerRotate] = usePlayer();\n  const [stage, setStage, rowsCleared] = useStage(player, resetPlayer);\n  const [score, setScore, rows, setRows, level, setLevel] = useGameStatus(\n    rowsCleared\n  );\n\n  console.log(\"re-render\");\n\n  const movePlayer = dir => {\n    if (!checkCollision(player, stage, { x: dir, y: 0 })) {\n      updatePlayerPos({ x: dir, y: 0 });\n    }\n  };\n\n  const keyUp = ({ keyCode }) => {\n    if (!gameOver) {\n      // Activate the interval again when user releases down arrow.\n      if (keyCode === 40) {\n        setDropTime(1000 / (level + 1));\n      }\n    }\n  };\n\n  const startGame = () => {\n    // Reset everything\n    setStage(createStage());\n    setDropTime(1000);\n    resetPlayer();\n    setScore(0);\n    setLevel(0);\n    setRows(0);\n    setGameOver(false);\n  };\n\n  const drop = () => {\n    // Increase level when player has cleared 10 rows\n    if (rows > (level + 1) * 10) {\n      setLevel(prev => prev + 1);\n      // Also increase speed\n      setDropTime(1000 / (level + 1) + 200);\n    }\n\n    if (!checkCollision(player, stage, { x: 0, y: 1 })) {\n      updatePlayerPos({ x: 0, y: 1, collided: false });\n    } else {\n      // Game over!\n      if (player.pos.y < 1) {\n        const options = { encrypt: false };\n        props.userSession.putFile(\n          \"scores.json\",\n          JSON.stringify(score),\n          options\n        );\n\n        console.log(\"GAME OVER!!!\");\n        setGameOver(true);\n        setDropTime(null);\n      }\n      updatePlayerPos({ x: 0, y: 0, collided: true });\n    }\n  };\n\n  const dropPlayer = () => {\n    // We don't need to run the interval when we use the arrow down to\n    // move the tetromino downwards. So deactivate it for now.\n    setDropTime(null);\n    drop();\n  };\n\n  // This one starts the game\n  // Custom hook by Dan Abramov\n  useInterval(() => {\n    drop();\n  }, dropTime);\n\n  const move = ({ keyCode }) => {\n    if (!gameOver) {\n      if (keyCode === 37) {\n        movePlayer(-1);\n      } else if (keyCode === 39) {\n        movePlayer(1);\n      } else if (keyCode === 40) {\n        dropPlayer();\n      } else if (keyCode === 38) {\n        playerRotate(stage, 1);\n      }\n    }\n  };\n\n  const username = props.userSession.loadUserData().username;\n  const profile = props.userSession.loadUserData();\n  const person = new Person(profile);\n  return (\n    <>\n      <Navbar username={username} user={person} signOut={props.handleSignOut} />\n      <StyledTetrisWrapper\n        role=\"button\"\n        tabIndex=\"0\"\n        onKeyDown={e => move(e)}\n        onKeyUp={keyUp}\n      >\n        <StyledTetris>\n          <Stage stage={stage} />\n          <aside>\n            {gameOver ? (\n              <Display gameOver={gameOver} text=\"Game Over\" />\n            ) : (\n              <div>\n                <Display text={`Score: ${score}`} />\n                <Display text={`rows: ${rows}`} />\n                <Display text={`Level: ${level}`} />\n              </div>\n            )}\n            <StartButton callback={startGame} />\n          </aside>\n        </StyledTetris>\n      </StyledTetrisWrapper>\n    </>\n  );\n};\n\nexport default Blockris;\n","import { useState, useEffect, useCallback } from \"react\";\n\nexport const useGameStatus = rowsCleared => {\n  const [score, setScore] = useState(0);\n  const [rows, setRows] = useState(0);\n  const [level, setLevel] = useState(0);\n\n  const linePoints = [40, 100, 300, 1200];\n\n  const calcScore = useCallback(() => {\n    // We have score\n    if (rowsCleared > 0) {\n      // This is how original Tetris score is calculated\n      setScore(prev => prev + linePoints[rowsCleared - 1] * (level + 1));\n      setRows(prev => prev + rowsCleared);\n    }\n  }, [level, linePoints, rowsCleared]);\n\n  useEffect(() => {\n    calcScore();\n  }, [calcScore, rowsCleared, score]);\n\n  return [score, setScore, rows, setRows, level, setLevel];\n};\n","import { useEffect, useRef } from \"react\";\n\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      const id = setInterval(tick, delay);\n      return () => {\n        clearInterval(id);\n      };\n    }\n  }, [delay]);\n}\n","import React, { Component } from \"react\";\nimport { Person, lookupProfile } from \"blockstack\";\nimport Navbar from \"./Navbar\";\nconst avatarFallbackImage =\n  \"https://s3.amazonaws.com/onename/avatar-placeholder.png\";\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      person: {\n        name() {\n          return \"Anonymous\";\n        },\n        avatarUrl() {\n          return avatarFallbackImage;\n        }\n      },\n      username: \"\",\n      newStatus: \"\",\n      statuses: [],\n      statusIndex: 0,\n      isLoading: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  handleNewStatusChange(event) {\n    this.setState({ newStatus: event.target.value });\n  }\n\n  handleNewStatusSubmit(event) {\n    this.saveNewStatus(this.state.newStatus);\n    this.setState({\n      newStatus: \"\"\n    });\n  }\n\n  saveNewStatus(statusText) {\n    const { userSession } = this.props;\n    let statuses = this.state.statuses;\n\n    let statusId = this.state.statusIndex + 1;\n\n    let status = {\n      id: statusId,\n      text: statusText.trim(),\n      created_at: Date.now()\n    };\n\n    statuses.unshift(status);\n    const options = { encrypt: true };\n    userSession\n      .putFile(\"statuses.json\", JSON.stringify(statuses), options)\n      .then(() => {\n        this.setState({\n          statuses: statuses\n        });\n      });\n  }\n\n  isLocal() {\n    return this.props.match.params.username ? false : true;\n  }\n\n  fetchData() {\n    const { userSession } = this.props;\n    this.setState({ isLoading: true });\n    if (this.isLocal()) {\n      const options = { decrypt: true };\n      userSession\n        .getFile(\"statuses.json\", options)\n        .then(file => {\n          var statuses = JSON.parse(file || \"[]\");\n          this.setState({\n            person: new Person(userSession.loadUserData().profile),\n            username: userSession.loadUserData().username,\n            statusIndex: statuses.length,\n            statuses: statuses\n          });\n        })\n        .finally(() => {\n          this.setState({ isLoading: false });\n        });\n    } else {\n      const username = this.props.match.params.username;\n      console.log(username);\n\n      lookupProfile(username)\n        .then(profile => {\n          this.setState({\n            person: new Person(profile),\n            username: username\n          });\n        })\n        .catch(error => {\n          console.log(\"could not resolve profile\");\n        });\n      const options = { username: username, decrypt: true };\n      userSession\n        .getFile(\"statuses.json\", options)\n        .then(file => {\n          var statuses = JSON.parse(file || \"[]\");\n          this.setState({\n            statusIndex: statuses.length,\n            statuses: statuses\n          });\n        })\n        .catch(error => {\n          console.log(\"could not fetch statuses\");\n        })\n        .finally(() => {\n          this.setState({ isLoading: false });\n        });\n    }\n  }\n\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    const { username } = this.state;\n\n    return !userSession.isSignInPending() && person ? (\n      <div className=\"container\">\n        <Navbar\n          username={username}\n          user={person}\n          signOut={this.props.handleSignOut}\n        />\n        <div className=\"row\">\n          <div className=\"col-md-offset-3 col-md-6\">\n            <div className=\"col-md-12\">\n              <div className=\"avatar-section\">\n                <img\n                  src={\n                    person.avatarUrl()\n                      ? person.avatarUrl()\n                      : avatarFallbackImage\n                  }\n                  className=\"img-rounded avatar\"\n                  id=\"avatar-image\"\n                />\n                <div className=\"username\">\n                  <h1>\n                    <span id=\"heading-name\">\n                      {person.name() ? person.name() : \"Nameless Person\"}\n                    </span>\n                  </h1>\n                  <span>{username}</span>\n                  {this.isLocal() && (\n                    <span>\n                      &nbsp;|&nbsp;\n                      <button onClick={handleSignOut.bind(this)}>Logout</button>\n                    </span>\n                  )}\n                </div>\n              </div>\n            </div>\n            {this.isLocal() && (\n              <div className=\"new-status\">\n                <div className=\"col-md-12\">\n                  <textarea\n                    className=\"input-status\"\n                    value={this.state.newStatus}\n                    onChange={e => this.handleNewStatusChange(e)}\n                    placeholder=\"What's on your mind?\"\n                  />\n                </div>\n                <div className=\"col-md-12 text-right\">\n                  <button\n                    className=\"btn btn-primary btn-lg\"\n                    onClick={e => this.handleNewStatusSubmit(e)}\n                  >\n                    Submit\n                  </button>\n                </div>\n              </div>\n            )}\n            <div className=\"col-md-12 statuses\">\n              {this.state.isLoading && <span>Loading...</span>}\n              {this.state.statuses.map(status => (\n                <div className=\"status\" key={status.id}>\n                  {status.text}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    ) : null;\n  }\n\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n      username: userSession.loadUserData().username\n    });\n  }\n}\n","import React from \"react\";\nimport { UserSession, Person } from \"blockstack\";\nimport Navbar from \"./Navbar\";\n\nclass Leaderboards extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      person: {\n        name() {\n          return \"Anonymous\";\n        }\n      },\n      username: \"\",\n      scores: [],\n      isLoading: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n  fetchData() {\n    const { userSession } = this.props;\n    this.setState({ isLoading: true });\n    const options = { decrypt: false };\n    userSession\n      .getFile(\"scores.json\", options)\n      .then(score => {\n        var scores = JSON.parse(score || \"[]\");\n\n        this.state.scores.push(scores);\n        this.setState({\n          person: new Person(userSession.loadUserData().profile),\n          username: userSession.loadUserData().username,\n          scores: this.state.scores\n        });\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  }\n  render() {\n    const username = this.props.userSession.loadUserData().username;\n    const profile = this.props.userSession.loadUserData();\n    const person = new Person(profile);\n\n    return (\n      <div>\n        <Navbar\n          username={username}\n          user={person}\n          signOut={this.props.handleSignOut}\n        />\n        <h1>Leaderboards</h1>\n        <div className=\"col-md-12 statuses\">\n          {this.state.isLoading && <span>Loading...</span>}\n          {this.state.scores.map(score => (\n            <div className=\"status\" key={score.id}>\n              {score}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Leaderboards;\n","import React, { Component } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Dashboard from \"./components/Dashboard\";\nimport Signin from \"./components/Signin\";\nimport Blockris from \"./components/blockris/Blockris\";\nimport Profile from \"./components/Profile\";\nimport Leaderboard from \"./components/Leaderboard\";\nimport { UserSession } from \"blockstack\";\nimport { appConfig } from \"./assets/constants\";\n\nconst userSession = new UserSession({ appConfig });\n\nexport default class App extends Component {\n  handleSignIn(e) {\n    e.preventDefault();\n    userSession.redirectToSignIn();\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        <div className=\"site-wrapper-inner\">\n          {!userSession.isUserSignedIn() ? (\n            <Signin\n              userSession={userSession}\n              handleSignIn={this.handleSignIn}\n            />\n          ) : (\n            <Switch>\n              <Route\n                exact\n                path=\"/\"\n                render={routeProps => (\n                  <Dashboard\n                    userSession={userSession}\n                    handleSignOut={this.handleSignOut}\n                    {...routeProps}\n                  />\n                )}\n              />\n              <Route\n                exact\n                path=\"/profile\"\n                render={routeProps => (\n                  <Profile\n                    userSession={userSession}\n                    handleSignOut={this.handleSignOut}\n                    {...routeProps}\n                  />\n                )}\n              />\n              <Route\n                exact\n                path=\"/blockris\"\n                render={routeProps => (\n                  <Blockris\n                    userSession={userSession}\n                    handleSignOut={this.handleSignOut}\n                    {...routeProps}\n                  />\n                )}\n              />\n\n              <Route\n                exact\n                path=\"/leaderboard\"\n                render={routeProps => (\n                  <Leaderboard\n                    userSession={userSession}\n                    handleSignOut={this.handleSignOut}\n                    {...routeProps}\n                  />\n                )}\n              />\n            </Switch>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  componentWillMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then(userData => {\n        //if (!userData.username) {\n        //  throw new Error('This app requires a username.')\n        //}\n        window.location = window.location.origin;\n      });\n    }\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport App from \"./App.js\";\n\n// Require Sass file so webpack can build it\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"./styles/style.css\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}